	# cd to script dir
set scriptDir [file normalize [file dirname [info script]]]
cd $scriptDir


set timeout 2


	# Test single file configuration

	# Start bash
exp_spawn bash --rcfile bashrc
set prompt "bashdots@/"
expect -ex $prompt
	# Load scripts
send "source ../../cdots.sh\n"
	# Execute tests
source lib/tests.exp
send "\rexit\r"

	# Test split file configuration

    # Make sure previous test is closed
exp_close; exp_wait
	# Start bash
exp_spawn bash --rcfile bashrc
set prompt "bashdots@/"
expect -ex $prompt> 
	# Load scripts
send "source ../../cdots-functions.sh\n"
send "source ../../cdots-completion.sh\n"
	# Execute tests
source lib/tests.exp
send "\rexit\r"
